databaseChangeLog:
  - changeSet:
      id: 01-create-initial-tables
      author: javad
      changes:
        # ---------------------------------
        # cars
        # ---------------------------------
        - createTable:
            tableName: cars
            columns:
              - column:
                  name: id
                  type: BIGSERIAL
                  remarks: Primary Key
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: brand
                  type: VARCHAR(50)
                  constraints:
                    nullable: false
              - column:
                  name: model
                  type: VARCHAR(50)
                  constraints:
                    nullable: false
              - column:
                  name: year
                  type: INTEGER
              - column:
                  name: transmissionType
                  type: VARCHAR(50)
              - column:
                  name: fuelType
                  type: VARCHAR(50)
              - column:
                  name: color
                  type: VARCHAR(50)
              - column:
                  name: kilometersDriven
                  type: DOUBLE PRECISION
              - column:
                  name: price
                  type: DOUBLE PRECISION
                  constraints:
                    nullable: false
              - column:
                  name: costPrice
                  type: DOUBLE PRECISION
                  constraints:
                    nullable: false
              - column:
                  name: saleStatus
                  type: VARCHAR(50)
                  constraints:
                    nullable: false

        # ---------------------------------
        # customers Tablosu
        # ---------------------------------
        - createTable:
            tableName: customers
            columns:
              - column:
                  name: id
                  type: BIGSERIAL
                  remarks: Primary Key
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: firstName
                  type: VARCHAR(100)
                  constraints:
                    nullable: false
              - column:
                  name: lastName
                  type: VARCHAR(100)
                  constraints:
                    nullable: false
              - column:
                  name: phoneNumber
                  type: VARCHAR(20)
              - column:
                  name: secondaryPhoneNumber
                  type: VARCHAR(20)
              - column:
                  name: email
                  type: VARCHAR(100)
                  constraints:
                    nullable: false
              - column:
                  name: city
                  type: VARCHAR(50)
              - column:
                  name: zipCode
                  type: VARCHAR(50)
              - column:
                  name: address
                  type: VARCHAR(255)
              - column:
                  name: dateOfBirth
                  type: DATE
              - column:
                  name: driverLicenseNumber
                  type: VARCHAR(50)
                  constraints:
                    nullable: false
                    unique: true

        # ---------------------------------
        # sales
        # ---------------------------------
        - createTable:
            tableName: sales
            columns:
              - column:
                  name: id
                  type: BIGSERIAL
                  remarks: Primary Key
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: carId
                  type: BIGINT
                  constraints:
                    nullable: false
                    foreignKeyName: fk_sale_car
                    references: cars(id)
              - column:
                  name: customerId
                  type: BIGINT
                  constraints:
                    nullable: false
                    foreignKeyName: fk_sale_customer
                    references: customers(id)
              - column:
                  name: saleDate
                  type: TIMESTAMP
                  constraints:
                    nullable: false
              - column:
                  name: carCostPrice
                  type: DOUBLE PRECISION
                  constraints:
                    nullable: false
              - column:
                  name: actualSalePrice
                  type: DOUBLE PRECISION
                  constraints:
                    nullable: false
              - column:
                  name: discountApplied
                  type: DOUBLE PRECISION
                  defaultValueNumeric: 0.0
              - column:
                  name: paymentMethod
                  type: VARCHAR(50)
              - column:
                  name: saleNotes
                  type: VARCHAR(255)